<!DOCTYPE html>
<html>
<head>
    <title>Fetch JSON</title>
</head>
<body>
    <form action="fetch-json" method="post">
        <input type="submit" value="Submit">
    </form>

    <!-- Optional: Display JSON in a textarea or div -->
    <textarea id="jsonDisplay" rows="10" cols="50"></textarea>

    <script>
          document.querySelector("form").addEventListener("submit", function(event) {
            event.preventDefault();
            
            fetch("fetch-json", {
                method: 'POST'
            }).then(response => {
                return response.text().then(text => {
                    console.log("Raw response:", text);
                    return JSON.parse(text);
                });
            }).then(data => {
                document.getElementById("jsonDisplay").value = JSON.stringify(data, null, 4);
            }).catch(error => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>
