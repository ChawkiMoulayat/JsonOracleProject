<!DOCTYPE html>
<html>
<head>
<title>Fetch and Store JSON</title>
</head>
<body>
<form id="jsonForm">
<label for="jsonInput">Enter JSON Data:</label>
<textarea id="jsonInput" rows="5" cols="50"></textarea>
<br>
<input type="submit" value="Submit JSON">
</form>
 
    <button id="retrieveButton">Retrieve Data</button>
<!-- Optional: Display JSON in a textarea or div -->
<textarea id="jsonDisplay" rows="10" cols="50"></textarea>
 
    <script>
        document.getElementById("jsonForm").addEventListener("submit", function(event) {
            event.preventDefault();
 
            // Get JSON data from the input field
            const jsonData = document.getElementById("jsonInput").value;
 
            // Send JSON data to the server
            fetch("fetch-json", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: jsonData,
            }).then(response => {
                return response.text().then(text => {
                    console.log("Raw response:", text);
                    return JSON.parse(text);
                });
            }).then(data => {
                document.getElementById("jsonDisplay").value = JSON.stringify(data, null, 4);
            }).catch(error => {
                console.error('Error:', error);
            });
        });
 
        document.getElementById("retrieveButton").addEventListener("click", function() {
            // Fetch data from the server
            fetch("fetch-json", {
                method: 'GET'
            }).then(response => {
                return response.text().then(text => {
                    console.log("Raw response:", text);
                    return JSON.parse(text);
                });
            }).then(data => {
                // Display the retrieved JSON data in the textbox
                document.getElementById("jsonDisplay").value = JSON.stringify(data, null, 4);
            }).catch(error => {
                console.error('Error:', error);
            });
        });
</script>
</body>
</html>